local AIO=AIO or require("AIO")if AIO.AddAddon()then return end;local a=AIO.AddHandlers("racialSwitch",{})local b={59752,20572,20594,58984,20549,7744,26297,28730,59542}local c={20573,65222,20555,58943,20550,822,20591,20592,5227,6562,20582,20551,21009,20585,20596,58985,20599,20598}local d=CreateFrame("Frame","MAINFRAME",UIParent,"UIPanelDialogTemplate")d.width=600;d.height=700;d:SetFrameStrata("FULLSCREEN_DIALOG")d:SetSize(d.width,d.height)d:SetPoint("CENTER",UIParent,"CENTER",0,0)d:SetBackdrop({bgFile="Interface\\DialogFrame\\UI-DialogBox-Background",edgeFile="Interface\\T    -DialogFrame-NewButton",tile=true,tileSize=32,edgeSize=32,insets={left=8,right=8,top=8,bottom=8}})d:SetBackdropColor(0,0,0,1)d:EnableMouse(true)d:EnableMouseWheel(true)d:SetMovable(true)d:SetResizable(enable)d:SetMinResize(100,100)d:RegisterForDrag("LeftButton")d:SetScript("OnDragStart",d.StartMoving)d:SetScript("OnDragStop",d.StopMovingOrSizing)tinsert(UISpecialFrames,"MAINFRAME")local e=d:CreateFontString(nil,"OVERLAY")e:SetFont("Fonts\\FRIZQT__.TTF",15)e:SetPoint("TOP",d,"TOP",0,-7)e:SetText("Racial Switch")local f=CreateFrame("Button",nil,d,"UIPanelButtonTemplate")f:SetPoint("BOTTOM",0,10)f:SetHeight(25)f:SetWidth(70)f:SetText(CLOSE)f:SetScript("OnClick",function(self)HideParentPanel(self)end)d.closeButton=f;local g=d:CreateFontString(nil,"OVERLAY")g:SetFont("Fonts\\FRIZQT__.TTF",20)g:SetPoint("TOPLEFT",d,"TOPLEFT",d.height/6.8,-40)g:SetText("Utility")d.utilityText=g;local h={}for i=1,#b do h[i]=CreateFrame("Button",nil,d)h[i]:SetPoint("TOPLEFT",d,"TOPLEFT",25,-35-i*50)h[i]:SetHeight(32)h[i]:SetWidth(32)h[i].texture=h[i]:CreateTexture(nil,"ARTWORK")h[i].texture:SetAllPoints()h[i].texture:SetTexture(select(3,GetSpellInfo(b[i])))h[i].texture:SetTexCoord(0.1,0.9,0.1,0.9)h[i].texture:SetDesaturated(false)h[i].texture:SetVertexColor(1,1,1)h[i].text=h[i]:CreateFontString(nil,"OVERLAY","GameFontNormal")h[i].text:SetPoint("LEFT",h[i],"RIGHT",5,0)h[i].text:SetText(GetSpellInfo(b[i]))h[i].text:SetTextColor(1,1,1)h[i].text:SetJustifyH("LEFT")h[i].text:SetJustifyV("CENTER")h[i].text:SetSize(d.width,d.height-50)h[i].text:SetWordWrap(false)h[i].text:SetShadowOffset(1,-1)h[i].text:SetShadowColor(0,0,0,1)local j=IsSpellKnown(b[i])if j then h[i].active=true;h[i].texture:SetDesaturated(true)h[i].texture:SetVertexColor(0.5,0.5,0.5)h[i].text:SetTextColor(1,1,0)end;h[i]:SetScript("OnClick",function(self)for i=1,#h do h[i].active=false;h[i].texture:SetDesaturated(false)h[i].texture:SetVertexColor(1,1,1)h[i].text:SetTextColor(1,1,1)AIO.Handle("racialSwitch","racialDeactivateUtility",b[i])end;self.active=true;self.texture:SetDesaturated(true)self.texture:SetVertexColor(0.5,0.5,0.5)self.text:SetTextColor(0.5,0.5,0.5)self.text:SetTextColor(1,1,0)AIO.Handle("racialSwitch","racialActivate",b[i])end)d.utilityButton=h end;local k=d:CreateFontString(nil,"OVERLAY")k:SetFont("Fonts\\FRIZQT__.TTF",20)k:SetPoint("TOPLEFT",d,"TOPLEFT",d.height/2.1,-40)k:SetText("Passive")d.passiveText=k;local l={}for i=1,#c do l[i]=CreateFrame("Button",nil,d)if i>10 then l[i]:SetPoint("TOPLEFT",d,"TOPLEFT",425,-35-(i-10)*50)else l[i]:SetPoint("TOPLEFT",d,"TOPLEFT",225,-35-i*50)end;l[i]:SetHeight(32)l[i]:SetWidth(32)l[i].texture=l[i]:CreateTexture(nil,"ARTWORK")l[i].texture:SetAllPoints()l[i].texture:SetTexture(select(3,GetSpellInfo(c[i])))l[i].texture:SetTexCoord(0.1,0.9,0.1,0.9)l[i].texture:SetDesaturated(false)l[i].texture:SetVertexColor(1,1,1)l[i].text=l[i]:CreateFontString(nil,"OVERLAY","GameFontNormal")l[i].text:SetPoint("LEFT",l[i],"RIGHT",5,0)l[i].text:SetText(GetSpellInfo(c[i]))l[i].text:SetTextColor(1,1,1)l[i].text:SetJustifyH("LEFT")l[i].text:SetJustifyV("CENTER")l[i].text:SetSize(d.width,d.height-50)l[i].text:SetWordWrap(false)l[i].text:SetShadowOffset(1,-1)l[i].text:SetShadowColor(0,0,0,1)local m=IsSpellKnown(c[i])if m then l[i].active=true;l[i].texture:SetDesaturated(true)l[i].texture:SetVertexColor(0.5,0.5,0.5)l[i].text:SetTextColor(1,1,0)end;l[i]:SetScript("OnClick",function(self)local n=0;for i=1,#l do if l[i].active then n=n+1 end end;if n>=2 then l[i].active=false;l[i].texture:SetDesaturated(false)l[i].texture:SetVertexColor(1,1,1)l[i].text:SetTextColor(1,1,1)AIO.Handle("racialSwitch","racialDeactivatePassive",c[i])return end;self.active=true;self.texture:SetDesaturated(true)self.texture:SetVertexColor(0.5,0.5,0.5)self.text:SetTextColor(0.5,0.5,0.5)self.text:SetTextColor(1,1,0)AIO.Handle("racialSwitch","racialActivate",c[i])end)d.passiveButton=l end;local o=CreateFrame("Button",nil,d,"UIPanelButtonTemplate")o:SetPoint("BOTTOMLEFT",d,"BOTTOMLEFT",10,10)o:SetHeight(25)o:SetWidth(70)o:SetText("RELOADUI")o:SetScript("OnClick",function(self)ReloadUI()end)local p=CreateFrame("Button",nil,d,"UIPanelButtonTemplate")p:SetPoint("BOTTOMRIGHT",-10,10)p:SetHeight(25)p:SetWidth(70)p:SetText("Reset")p:SetScript("OnEnter",function(self)self:SetBackdropBorderColor(1,1,1,1)end)p:SetScript("OnLeave",function(self)self:SetBackdropBorderColor(0,0,0,1)end)p:SetScript("OnClick",function(self)for i=1,#h do if h[i].active then h[i].active=false;h[i].texture:SetDesaturated(false)h[i].texture:SetVertexColor(1,1,1)h[i].text:SetTextColor(1,1,1)AIO.Handle("racialSwitch","racialDeactivateUtility",b[i])end end;for i=1,#l do if l[i].active then l[i].active=false;l[i].texture:SetDesaturated(false)l[i].texture:SetVertexColor(1,1,1)l[i].text:SetTextColor(1,1,1)AIO.Handle("racialSwitch","racialDeactivatePassive",c[i])end end end)d.testButton=p;SLASH_AHF1="/tf"SlashCmdList.AHF=function()if d:IsShown()then d:Hide()else d:Show()end end;function a.MyAddonFrame(q)d:Show()end