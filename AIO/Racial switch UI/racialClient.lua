local AIO=AIO or require("AIO")if AIO.AddAddon()then return end;local a=AIO.AddHandlers("racialSwitch",{})local b={20574,26290,20595,59224,20597,20558}local c={59752,20572,20594,58984,20549,7744,26297,28730,59542,2481}local d={20592,20596,20579,20551,822,20573,65222,20555,58943,20550,20591,5227,6562,20582,21009,20585,58985,20599,20598}local e={59188,20593,20552,28877}local function f(self)local g=select(2,self:GetSpell())if not g then return end;local h=GetSpellInfo(g)if not h then return end;local i=GetSpellLink(g,SpellBookFrame.bookType)if not i then return end;local j=select(3,string.find(i,"spell:(%d+)"))if not j then return end;local h=GetSpellInfo(g)if not h then return end;local i=GetSpellLink(g,SpellBookFrame.bookType)if not i then return end end;local k=CreateFrame("Frame","MAINFRAME",UIParent,"UIPanelDialogTemplate")k.width=900;k.height=700;k:SetFrameStrata("FULLSCREEN_DIALOG")k:SetSize(k.width,k.height)k:SetPoint("CENTER",UIParent,"CENTER",0,0)k:SetBackdropColor(0,0,0,1)k:EnableMouse(true)k:EnableMouseWheel(true)k:SetMovable(true)k:SetResizable(enable)k:SetMinResize(100,100)k:RegisterForDrag("LeftButton")k:SetScript("OnDragStart",k.StartMoving)k:SetScript("OnDragStop",k.StopMovingOrSizing)tinsert(UISpecialFrames,"MAINFRAME")local l=k:CreateFontString(nil,"OVERLAY")l:SetFont("Fonts\\FRIZQT__.TTF",15)l:SetPoint("TOP",k,"TOP",0,-7)l:SetText("Racial Switch")local m=CreateFrame("Button",nil,k,"UIPanelButtonTemplate")m:SetPoint("BOTTOM",0,10)m:SetHeight(25)m:SetWidth(70)m:SetText(CLOSE)m:SetScript("OnClick",function(self)HideParentPanel(self)end)k.closeButton=m;local n=k:CreateFontString(nil,"OVERLAY")n:SetFont("Fonts\\FRIZQT__.TTF",20)n:SetPoint("TOPLEFT",k,"TOPLEFT",k.height/6.8,-40)n:SetText("Utility")k.utilityText=n;local o={}for p=1,#c do o[p]=CreateFrame("Button",nil,k)o[p]:SetPoint("TOPLEFT",k,"TOPLEFT",25,-35-p*50)o[p]:SetHeight(32)o[p]:SetWidth(32)o[p].texture=o[p]:CreateTexture(nil,"ARTWORK")o[p].texture:SetAllPoints()o[p].texture:SetTexture(select(3,GetSpellInfo(c[p])))o[p].texture:SetTexCoord(0.1,0.9,0.1,0.9)o[p].texture:SetDesaturated(false)o[p].texture:SetVertexColor(1,1,1)o[p].text=o[p]:CreateFontString(nil,"OVERLAY","GameFontNormal")o[p].text:SetPoint("LEFT",o[p],"RIGHT",5,0)o[p].text:SetText(GetSpellInfo(c[p]))o[p].text:SetTextColor(1,1,1)o[p].text:SetJustifyH("LEFT")o[p].text:SetJustifyV("CENTER")o[p].text:SetSize(k.width,k.height-50)o[p].text:SetWordWrap(false)o[p].text:SetShadowOffset(1,-1)o[p].text:SetShadowColor(0,0,0,1)local q=IsSpellKnown(c[p])if q then o[p].active=true;o[p].texture:SetDesaturated(true)o[p].texture:SetVertexColor(0.5,0.5,0.5)o[p].text:SetTextColor(1,1,0)end;o[p]:SetScript("OnClick",function(self)for p=1,#o do o[p].active=false;o[p].texture:SetDesaturated(false)o[p].texture:SetVertexColor(1,1,1)o[p].text:SetTextColor(1,1,1)AIO.Handle("racialSwitch","racialDeactivateUtility",c[p])PlaySound("igMainMenuOptionCheckBoxOff")end;self.active=true;self.texture:SetDesaturated(true)self.texture:SetVertexColor(0.5,0.5,0.5)self.text:SetTextColor(0.5,0.5,0.5)self.text:SetTextColor(1,1,0)AIO.Handle("racialSwitch","racialActivate",c[p])PlaySound("igMainMenuOptionCheckBoxOn")end)o[p].spellId=c[p]o[p]:SetScript("OnEnter",function(self)GameTooltip:SetOwner(self,"ANCHOR_RIGHT")GameTooltip:SetHyperlink("spell:"..self.spellId)GameTooltip:Show()end)o[p]:SetScript("OnLeave",function(self)GameTooltip:Hide()end)end;k.utilityButton=o;local r=k:CreateFontString(nil,"OVERLAY")r:SetFont("Fonts\\FRIZQT__.TTF",20)r:SetPoint("TOPLEFT",k,"TOPLEFT",k.height/2.1,-40)r:SetText("Passive")k.passiveText=r;local s={}for p=1,#d do s[p]=CreateFrame("Button",nil,k)if p>10 then s[p]:SetPoint("TOPLEFT",k,"TOPLEFT",425,-35-(p-10)*50)else s[p]:SetPoint("TOPLEFT",k,"TOPLEFT",225,-35-p*50)end;s[p]:SetHeight(32)s[p]:SetWidth(32)s[p].texture=s[p]:CreateTexture(nil,"ARTWORK")s[p].texture:SetAllPoints()s[p].texture:SetTexture(select(3,GetSpellInfo(d[p])))s[p].texture:SetTexCoord(0.1,0.9,0.1,0.9)s[p].texture:SetDesaturated(false)s[p].texture:SetVertexColor(1,1,1)s[p].text=s[p]:CreateFontString(nil,"OVERLAY","GameFontNormal")s[p].text:SetPoint("LEFT",s[p],"RIGHT",5,0)s[p].text:SetText(GetSpellInfo(d[p]))s[p].text:SetTextColor(1,1,1)s[p].text:SetJustifyH("LEFT")s[p].text:SetJustifyV("CENTER")s[p].text:SetSize(k.width,k.height-50)s[p].text:SetWordWrap(false)s[p].text:SetShadowOffset(1,-1)s[p].text:SetShadowColor(0,0,0,1)local t=IsSpellKnown(d[p])if t then s[p].active=true;s[p].texture:SetDesaturated(true)s[p].texture:SetVertexColor(0.5,0.5,0.5)s[p].text:SetTextColor(1,1,0)end;s[p]:SetScript("OnClick",function(self)local u=0;for p=1,#s do if s[p].active then u=u+1 end end;if u>=2 then s[p].active=false;s[p].texture:SetDesaturated(false)s[p].texture:SetVertexColor(1,1,1)s[p].text:SetTextColor(1,1,1)AIO.Handle("racialSwitch","racialDeactivatePassive",d[p])PlaySound("igMainMenuOptionCheckBoxOff")return end;self.active=true;self.texture:SetDesaturated(true)self.texture:SetVertexColor(0.5,0.5,0.5)self.text:SetTextColor(0.5,0.5,0.5)self.text:SetTextColor(1,1,0)AIO.Handle("racialSwitch","racialActivate",d[p])PlaySound("igMainMenuOptionCheckBoxOn")end)s[p].spellId=d[p]s[p]:SetScript("OnEnter",function(self)GameTooltip:SetOwner(self,"ANCHOR_RIGHT")GameTooltip:SetHyperlink("spell:"..self.spellId)GameTooltip:Show()end)s[p]:SetScript("OnLeave",function(self)GameTooltip:Hide()end)end;k.passiveButton=s;local v=k:CreateFontString(nil,"OVERLAY")v:SetFont("Fonts\\FRIZQT__.TTF",20)v:SetPoint("TOPRIGHT",k,"TOPRIGHT",-45,-40)v:SetText("Weapon Specialization")local w={}for p=1,#b do w[p]=CreateFrame("Button",nil,k,"SecureUnitButtonTemplate")w[p]:SetPoint("CENTER",k,"CENTER",200,295-p*50)w[p]:SetHeight(32)w[p]:SetWidth(32)w[p].texture=w[p]:CreateTexture(nil,"ARTWORK")w[p].texture:SetAllPoints()w[p].texture:SetTexture(select(3,GetSpellInfo(b[p])))w[p].texture:SetTexCoord(0.1,0.9,0.1,0.9)w[p].texture:SetDesaturated(false)w[p].texture:SetVertexColor(1,1,1)w[p].text=w[p]:CreateFontString(nil,"OVERLAY","GameFontNormal")w[p].text:SetPoint("LEFT",w[p],"RIGHT",5,0)w[p].text:SetText(GetSpellInfo(b[p]))w[p].text:SetTextColor(1,1,1)w[p].text:SetJustifyH("LEFT")w[p].text:SetJustifyV("CENTER")w[p].text:SetSize(k.width,k.height-50)w[p].text:SetWordWrap(false)w[p].text:SetShadowOffset(1,-1)w[p].text:SetShadowColor(0,0,0,1)local x=IsSpellKnown(b[p])if x then w[p].active=true;w[p].texture:SetDesaturated(true)w[p].texture:SetVertexColor(0.5,0.5,0.5)w[p].text:SetTextColor(1,1,0)end;w[p]:SetScript("OnClick",function(self)for p=1,#w do w[p].active=false;w[p].texture:SetDesaturated(false)w[p].texture:SetVertexColor(1,1,1)w[p].text:SetTextColor(1,1,1)AIO.Handle("racialSwitch","racialDeactivateWeaponSpecialization",b[p])PlaySound("igMainMenuOptionCheckBoxOff")end;self.active=true;self.texture:SetDesaturated(true)self.texture:SetVertexColor(0.5,0.5,0.5)self.text:SetTextColor(0.5,0.5,0.5)self.text:SetTextColor(1,1,0)AIO.Handle("racialSwitch","racialActivate",b[p])PlaySound("igMainMenuOptionCheckBoxOn")end)w[p].spellId=b[p]w[p]:SetScript("OnEnter",function(self)GameTooltip:SetOwner(self,"ANCHOR_RIGHT")GameTooltip:SetHyperlink("spell:"..self.spellId)GameTooltip:Show()end)w[p]:SetScript("OnLeave",function(self)GameTooltip:Hide()end)end;k.weaponSpecializationButton=w;local y=CreateFrame("Button",nil,k,"UIPanelButtonTemplate")y:SetPoint("BOTTOMLEFT",k,"BOTTOMLEFT",10,10)y:SetHeight(25)y:SetWidth(70)y:SetText("RELOADUI")y:SetScript("OnClick",function(self)ReloadUI()end)local z=CreateFrame("Button",nil,k,"UIPanelButtonTemplate")z:SetPoint("BOTTOMRIGHT",-10,10)z:SetHeight(25)z:SetWidth(70)z:SetText("Reset")z:SetScript("OnEnter",function(self)self:SetBackdropBorderColor(1,1,1,1)end)z:SetScript("OnLeave",function(self)self:SetBackdropBorderColor(0,0,0,1)end)z:SetScript("OnClick",function(self)for p=1,#o do if o[p].active then o[p].active=false;o[p].texture:SetDesaturated(false)o[p].texture:SetVertexColor(1,1,1)o[p].text:SetTextColor(1,1,1)AIO.Handle("racialSwitch","racialDeactivateUtility",c[p])end end;for p=1,#s do if s[p].active then s[p].active=false;s[p].texture:SetDesaturated(false)s[p].texture:SetVertexColor(1,1,1)s[p].text:SetTextColor(1,1,1)AIO.Handle("racialSwitch","racialDeactivatePassive",d[p])end end;for p=1,#b do if w[p].active then w[p].active=false;w[p].texture:SetDesaturated(false)w[p].texture:SetVertexColor(1,1,1)w[p].text:SetTextColor(1,1,1)AIO.Handle("racialSwitch","racialDeactivateWeaponSpecialization",b[p])end end end)k.testButton=z;SLASH_AHF1="/tf"SlashCmdList.AHF=function()if k:IsShown()then k:Hide()PlaySound("igCharacterInfoTab")else k:Show()PlaySound("igCharacterInfoTab")end end;function a.MyAddonFrame(A)if k:IsShown()then k:Hide()PlaySound("igSpellBookClose")else k:Show()PlaySound("igSpellBookOpen")end end