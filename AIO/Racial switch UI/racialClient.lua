local AIO=AIO or require("AIO")if AIO.AddAddon()then return end;local a=AIO.AddHandlers("racialSwitch",{})local b={20574,26290,20595,59224,20597,20558}local c={59752,20572,20594,58984,20549,7744,26297,28730,59542,2481}local d={20592,20596,20579,20551,822,20573,65222,20555,58943,20550,20591,5227,6562,20582,21009,20585,58985,20599,20598}local e={59188,20593,20552,28877}local f=true;local g=false;local h,i,j=1,1,1;local k,l,m=0.5,0.5,0.5;local n,o,p=1,1,1;local q,r,s=1,1,0;local t=CreateFrame("Frame","MAINFRAME",UIParent,"UIPanelDialogTemplate")t.width=900;t.height=700;t:SetFrameStrata("FULLSCREEN_DIALOG")t:SetSize(t.width,t.height)t:SetPoint("CENTER",UIParent,"CENTER",0,0)t:SetBackdropColor(0,0,0,1)t:EnableMouse(true)t:EnableMouseWheel(true)t:SetMovable(true)t:SetResizable(enable)t:SetMinResize(100,100)t:RegisterForDrag("LeftButton")t:SetScript("OnDragStart",t.StartMoving)t:SetScript("OnDragStop",t.StopMovingOrSizing)tinsert(UISpecialFrames,"MAINFRAME")local u=t:CreateFontString(nil,"OVERLAY")u:SetFont("Fonts\\FRIZQT__.TTF",15)u:SetPoint("TOP",t,"TOP",0,-7)u:SetText("Racial Switch")local v=CreateFrame("Button",nil,t,"UIPanelButtonTemplate")v:SetPoint("BOTTOM",0,10)v:SetHeight(25)v:SetWidth(70)v:SetText(CLOSE)v:SetScript("OnClick",function(self)HideParentPanel(self)end)t.closeButton=v;local w=t:CreateFontString(nil,"OVERLAY")w:SetFont("Fonts\\FRIZQT__.TTF",20)w:SetPoint("TOPLEFT",t,"TOPLEFT",t.height/6.8,-40)w:SetText("Utility")t.utilityText=w;local x={}for y=1,#c do x[y]=CreateFrame("Button",nil,t)x[y]:SetPoint("TOPLEFT",t,"TOPLEFT",25,-35-y*50)x[y]:SetHeight(32)x[y]:SetWidth(32)x[y].texture=x[y]:CreateTexture(nil,"ARTWORK")x[y].texture:SetAllPoints()x[y].texture:SetTexture(select(3,GetSpellInfo(c[y])))x[y].texture:SetTexCoord(0.1,0.9,0.1,0.9)x[y].texture:SetDesaturated(false)x[y].texture:SetVertexColor(1,1,1)x[y].text=x[y]:CreateFontString(nil,"OVERLAY","GameFontNormal")x[y].text:SetPoint("LEFT",x[y],"RIGHT",5,0)x[y].text:SetText(GetSpellInfo(c[y]))x[y].text:SetTextColor(1,1,1)x[y].text:SetJustifyH("LEFT")x[y].text:SetJustifyV("CENTER")x[y].text:SetSize(t.width,t.height-50)x[y].text:SetWordWrap(false)x[y].text:SetShadowOffset(1,-1)x[y].text:SetShadowColor(0,0,0,1)local z=IsSpellKnown(c[y])if z then x[y].active=true;x[y].texture:SetDesaturated(false)x[y].texture:SetVertexColor(h,i,j)x[y].text:SetTextColor(q,r,s)elseif z==false then x[y].active=false;x[y].texture:SetDesaturated(true)x[y].texture:SetVertexColor(h,i,j)x[y].text:SetTextColor(n,o,p)end;x[y]:SetScript("OnClick",function(self)if self.active==true then return end;for y=1,#x do if x[y].active then x[y].active=false;x[y].texture:SetDesaturated(f)x[y].texture:SetVertexColor(k,l,m)x[y].text:SetTextColor(n,o,p)AIO.Handle("racialSwitch","racialDeactivateUtility",c[y])PlaySound("igMainMenuOptionCheckBoxOff")end end;self.active=true;self.texture:SetDesaturated(g)self.texture:SetVertexColor(h,i,j)self.text:SetTextColor(q,r,s)AIO.Handle("racialSwitch","racialActivate",c[y])PlaySound("igMainMenuOptionCheckBoxOn")end)x[y].spellId=c[y]x[y]:SetScript("OnEnter",function(self)GameTooltip:SetOwner(self,"ANCHOR_RIGHT")GameTooltip:SetHyperlink("spell:"..self.spellId)GameTooltip:Show()end)x[y]:SetScript("OnLeave",function(self)GameTooltip:Hide()end)end;t.utilityButton=x;local A=t:CreateFontString(nil,"OVERLAY")A:SetFont("Fonts\\FRIZQT__.TTF",20)A:SetPoint("TOPLEFT",t,"TOPLEFT",t.height/2.1,-40)A:SetText("Passive")t.passiveText=A;local B={}for y=1,#d do B[y]=CreateFrame("Button",nil,t)if y>10 then B[y]:SetPoint("TOPLEFT",t,"TOPLEFT",425,-35-(y-10)*50)else B[y]:SetPoint("TOPLEFT",t,"TOPLEFT",225,-35-y*50)end;B[y]:SetHeight(32)B[y]:SetWidth(32)B[y].texture=B[y]:CreateTexture(nil,"ARTWORK")B[y].texture:SetAllPoints()B[y].texture:SetTexture(select(3,GetSpellInfo(d[y])))B[y].texture:SetTexCoord(0.1,0.9,0.1,0.9)B[y].texture:SetDesaturated(false)B[y].texture:SetVertexColor(1,1,1)B[y].text=B[y]:CreateFontString(nil,"OVERLAY","GameFontNormal")B[y].text:SetPoint("LEFT",B[y],"RIGHT",5,0)B[y].text:SetText(GetSpellInfo(d[y]))B[y].text:SetTextColor(1,1,1)B[y].text:SetJustifyH("LEFT")B[y].text:SetJustifyV("CENTER")B[y].text:SetSize(t.width,t.height-50)B[y].text:SetWordWrap(false)B[y].text:SetShadowOffset(1,-1)B[y].text:SetShadowColor(0,0,0,1)local C=IsSpellKnown(d[y])if C then B[y].active=true;B[y].texture:SetDesaturated(g)B[y].texture:SetVertexColor(h,i,j)B[y].text:SetTextColor(q,r,s)elseif C==false then B[y].active=false;B[y].texture:SetDesaturated(f)B[y].texture:SetVertexColor(h,i,j)B[y].text:SetTextColor(n,o,p)end;B[y]:SetScript("OnClick",function(self)local D=0;for y=1,#B do if B[y].active then D=D+1 end end;if D>=2 then B[y].active=false;B[y].texture:SetDesaturated(f)B[y].texture:SetVertexColor(k,l,m)B[y].text:SetTextColor(n,o,p)AIO.Handle("racialSwitch","racialDeactivatePassive",d[y])PlaySound("igMainMenuOptionCheckBoxOff")return end;self.active=true;self.texture:SetDesaturated(g)self.texture:SetVertexColor(h,i,j)self.text:SetTextColor(q,r,s)AIO.Handle("racialSwitch","racialActivate",d[y])PlaySound("igMainMenuOptionCheckBoxOn")end)B[y].spellId=d[y]B[y]:SetScript("OnEnter",function(self)GameTooltip:SetOwner(self,"ANCHOR_RIGHT")GameTooltip:SetHyperlink("spell:"..self.spellId)GameTooltip:Show()end)B[y]:SetScript("OnLeave",function(self)GameTooltip:Hide()end)end;t.passiveButton=B;local E=t:CreateFontString(nil,"OVERLAY")E:SetFont("Fonts\\FRIZQT__.TTF",20)E:SetPoint("TOPRIGHT",t,"TOPRIGHT",-45,-40)E:SetText("Weapon Specialization")local F={}for y=1,#b do F[y]=CreateFrame("Button",nil,t,"SecureUnitButtonTemplate")F[y]:SetPoint("CENTER",t,"CENTER",200,295-y*50)F[y]:SetHeight(32)F[y]:SetWidth(32)F[y].texture=F[y]:CreateTexture(nil,"ARTWORK")F[y].texture:SetAllPoints()F[y].texture:SetTexture(select(3,GetSpellInfo(b[y])))F[y].texture:SetTexCoord(0.1,0.9,0.1,0.9)F[y].texture:SetDesaturated(false)F[y].texture:SetVertexColor(1,1,1)F[y].text=F[y]:CreateFontString(nil,"OVERLAY","GameFontNormal")F[y].text:SetPoint("LEFT",F[y],"RIGHT",5,0)F[y].text:SetText(GetSpellInfo(b[y]))F[y].text:SetTextColor(1,1,1)F[y].text:SetJustifyH("LEFT")F[y].text:SetJustifyV("CENTER")F[y].text:SetSize(t.width,t.height-50)F[y].text:SetWordWrap(false)F[y].text:SetShadowOffset(1,-1)F[y].text:SetShadowColor(0,0,0,1)local G=IsSpellKnown(b[y])if G then F[y].active=true;F[y].texture:SetDesaturated(g)F[y].texture:SetVertexColor(h,i,j)F[y].text:SetTextColor(q,r,s)elseif G==false then F[y].active=false;F[y].texture:SetDesaturated(f)F[y].texture:SetVertexColor(h,i,j)F[y].text:SetTextColor(n,o,p)end;F[y]:SetScript("OnClick",function(self)if self.active==true then return end;for y=1,#F do F[y].active=false;F[y].texture:SetDesaturated(true)F[y].texture:SetVertexColor(k,l,m)F[y].text:SetTextColor(n,o,p)AIO.Handle("racialSwitch","racialDeactivateWeaponSpecialization",b[y])PlaySound("igMainMenuOptionCheckBoxOff")end;self.active=true;self.texture:SetDesaturated(false)self.texture:SetVertexColor(h,i,j)self.text:SetTextColor(q,r,s)AIO.Handle("racialSwitch","racialActivate",b[y])PlaySound("igMainMenuOptionCheckBoxOn")end)F[y].spellId=b[y]F[y]:SetScript("OnEnter",function(self)GameTooltip:SetOwner(self,"ANCHOR_RIGHT")GameTooltip:SetHyperlink("spell:"..self.spellId)GameTooltip:Show()end)F[y]:SetScript("OnLeave",function(self)GameTooltip:Hide()end)end;t.weaponSpecializationButton=F;local H=CreateFrame("Button",nil,t,"UIPanelButtonTemplate")H:SetPoint("BOTTOMLEFT",t,"BOTTOMLEFT",10,10)H:SetHeight(25)H:SetWidth(70)H:SetText("RELOADUI")H:SetScript("OnClick",function(self)ReloadUI()end)local I=CreateFrame("Button",nil,t,"UIPanelButtonTemplate")I:SetPoint("BOTTOMRIGHT",-10,10)I:SetHeight(25)I:SetWidth(70)I:SetText("Reset")I:SetScript("OnEnter",function(self)self:SetBackdropBorderColor(1,1,1,1)end)I:SetScript("OnLeave",function(self)self:SetBackdropBorderColor(0,0,0,1)end)I:SetScript("OnClick",function(self)for y=1,#x do if x[y].active then x[y].active=true;x[y].texture:SetDesaturated(true)x[y].texture:SetVertexColor(h,i,j)x[y].text:SetTextColor(n,o,p)AIO.Handle("racialSwitch","racialDeactivateUtility",c[y])end end;for y=1,#B do if B[y].active then B[y].active=true;B[y].texture:SetDesaturated(true)B[y].texture:SetVertexColor(h,i,j)B[y].text:SetTextColor(n,o,p)AIO.Handle("racialSwitch","racialDeactivatePassive",d[y])end end;for y=1,#b do if F[y].active then F[y].active=true;F[y].texture:SetDesaturated(f)F[y].texture:SetVertexColor(h,i,j)F[y].text:SetTextColor(n,o,p)AIO.Handle("racialSwitch","racialDeactivateWeaponSpecialization",b[y])end end;PlaySound("igMainMenuOptionCheckBoxOff")end)t.testButton=I;SLASH_AHF1="/tf"SlashCmdList.AHF=function()if t:IsShown()then t:Hide()PlaySound("igCharacterInfoTab")else t:Show()PlaySound("igCharacterInfoTab")end end;function a.MyAddonFrame(J)if t:IsShown()then t:Hide()PlaySound("igSpellBookClose")else t:Show()PlaySound("igSpellBookOpen")end end